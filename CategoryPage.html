<!doctype html>
<html><head>
	<meta charset="UTF-8">
	<title>Category Page</title>
	<script src="Products.js"></script>
	<script>
		const searchInput = getQueryVariable("category");
		var mainResults = (searchProducts(products, searchInput));
		var collectionResults = searchCollectionsFromResults(mainResults);
	</script>
	<link href="CategoryPage_Stylesheet.css" rel="stylesheet" type="text/css">
	<link rel="icon" href="Resources/Favicon/Pixelloid icon.png">
</head>

<body>
    <div id="navBar" class="zstackParent">
		<img id="navBarBase" src="Resources/Nav Bar/Header_base.png" alt="Header">
	   	<div id="navBarItems" class="zstackLeftChild hstack">
		    <spacer style="width: 2%"></spacer>
		    <a href="Index.html"><img src="Resources/Nav Bar/Pixelloid icon.png" style="width: 20em" alt="Pixelloid Icon"></a>
		    <spacer style="width: 2%"></spacer>
		    <a href="CategoryPage.html?category=Pixels"><h2>Pixels</h2></a>
		    <spacer style="width: 5%"></spacer>
		    <a href="CategoryPage.html?category=Worlds"><h2>Worlds</h2></a>
		    <spacer style="width: 5%"></spacer>
		    <a href="CategoryPage.html?category=Entities"><h2>Entities</h2></a>
		    <spacer style="width: 5%;"></spacer>
		    <a href="CategoryPage.html?category=Catchphrases"><h2>Catchphrases</h2></a>
		    <spacer style="width: 50%"></spacer>
		   <a href="SearchPage.html"><svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="4.5em"
   viewBox="0 0 500.00001 500.00001"
   version="1.1"
   inkscape:version="0.92.3 (2405546, 2018-03-11)"
   sodipodi:docname="Search_Icon.svg">
  <defs
     id="defs4164" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.954"
     inkscape:cx="250"
     inkscape:cy="250"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     units="px"
     inkscape:window-width="1366"
     inkscape:window-height="706"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata4167">
    <rdf:rdf>
      <cc:work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-552.36216)">
    <g
       id="g1400"
       transform="translate(-4.3609793,-7.6704785)">
      <path
         inkscape:connector-curvature="0"
         id="path4714"
         d="M 232.83952,614.96702 A 154.04816,154.04794 0 0 0 78.79153,769.01382 154.04816,154.04794 0 0 0 232.83952,923.06184 154.04816,154.04794 0 0 0 386.88751,769.01382 154.04816,154.04794 0 0 0 232.83952,614.96702 Z m 0,26.77613 A 129.95832,127.2707 0 0 1 362.79832,769.01382 129.95832,127.2707 0 0 1 232.83952,896.28449 129.95832,127.2707 0 0 1 102.88194,769.01382 129.95832,127.2707 0 0 1 232.83952,641.74315 Z"
         style="opacity:1;fill:#343537;fill-opacity:1;stroke:none;stroke-opacity:1" />
      <rect
         ry="18.08342"
         rx="33.249443"
         transform="matrix(0.65316768,0.7572133,-0.60689051,0.79478545,0,0)"
         y="319.55432"
         x="794.8775"
         height="36.16684"
         width="173.02675"
         id="rect4721"
         style="opacity:1;fill:#343537;fill-opacity:1;stroke:none;stroke-opacity:1" />
    </g>
  </g>
</svg></a>	
	   	</div>
	</div>
	<div>
		<div id="set-height"></div>
		<video id="v0" class="fixed" tabindex="0" autobuffer="autobuffer" preload="metadata">
			<source id="openingVideoSource" type="video/webm; codecs=&quot;vp8, vorbis&quot;" src=""></source>
			<script> 
				document.getElementById("openingVideoSource").src = "Resources/Category Page/" + searchInput + "PageOpeningFinal.webm";
				document.getElementById("v0").load();
			</script>
			<p>Sorry, your browser does not support the &lt;video&gt; element.</p>
		</video>
		<script  src="./scrollPlay.js"></script>
	</div>
	<div id="pageContent" class="pageContent">
		<div class="zstackParent">
			<img id="topPanel" src="Resources/Category Page/Top Panel.png" alt="Top Panel" style="width: 100%; ">
			<div class="zstackCentreChild zstackParent">
				<img id="CategoryTitleImage" src="" alt="CategoryImage">
				<h1 id="categoryTitle" class="zstackCentreChild"></h1>
			</div>
			<script>
				document.getElementById("categoryTitle").innerHTML = searchInput;
				document.getElementById("CategoryTitleImage").src = "Resources/Category Page/" + searchInput + "TitleImage.png";
			</script>
		</div>
		<div id="Top Collection" class="zstackParent hCentre" style="width: 90%;">
			<img src="Resources/Category Page/Collection Frame.png" alt="Top Collection" width= "100%" class="hCentre">
			<div id="topCollectionTitle" class="zstackLeftChild" style="--left: 5%;--top: 5%;">
				<h3 id="topCollectionTitleText"><span1 id="topCollectionName">Collection</span1><span id="topCollectionPrice">⟁#</span></h3>
				<script>
				var NameOfCollection = collectionResults[0][0];
				document.getElementById("topCollectionName").innerHTML = ("Top Collection: " + NameOfCollection);
				document.getElementById("topCollectionPrice").innerHTML = "⟁" + (((products[(searchProductsOfCollection(products, NameOfCollection))[0]])["price"]) + ((products[(searchProductsOfCollection(products, NameOfCollection))[1]])["price"]) + ((products[(searchProductsOfCollection(products, NameOfCollection))[2]])["price"]) + ((products[(searchProductsOfCollection(products, NameOfCollection))[3]])["price"]));
				</script>
			</div>
			<a id="allCollectionsButton" class="zstackLeftChild zstackParent" style="left: var(--t, 1); top: var(--t, 1); bottom:2%; right:1%">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35em" viewBox="0 0 348 56">
				  <defs>
				    <filter id="Rectangle_240" x="0" y="0" width="348" height="56" filterUnits="userSpaceOnUse">
				      <feOffset dy="5" input="SourceAlpha"/>
				      <feGaussianBlur stdDeviation="3" result="blur"/>
				      <feFlood flood-opacity="0.161" result="color"/>
				      <feComposite operator="out" in="SourceGraphic" in2="blur"/>
				      <feComposite operator="in" in="color"/>
				      <feComposite operator="in" in2="SourceGraphic"/>
				    </filter>
				  </defs>
				  <g id="Group_33" data-name="Group 33" transform="translate(-1231.937 -1077)">
				    <rect id="Rectangle_362" data-name="Rectangle 362" width="348" height="56" rx="28" transform="translate(1231.937 1077)" fill="rgba(136,106,106,0.11)"/>
				    <g transform="matrix(1, 0, 0, 1, 1231.94, 1077)" filter="url(#Rectangle_240)">
				      <rect id="Rectangle_240-2" data-name="Rectangle 240" width="348" height="56" rx="28" fill="#fff"/>
				    </g>
				  </g>
				</svg>
				<div id="allCollectionsText" class="hstack zstackCentreChild">
					<h3 style="padding-left: 8%; padding-right: 5%;">All Collections</h3>
					<svg xmlns="http://www.w3.org/2000/svg" width="3em" viewBox="0 0 25 18">
  						<path id="right-arrow" d="M16.835,4.945a.868.868,0,0,0-1.26,0,.926.926,0,0,0,0,1.277l6.389,6.542H.882a.888.888,0,0,0-.882.9.9.9,0,0,0,.882.916H21.963l-6.389,6.529a.942.942,0,0,0,0,1.29.868.868,0,0,0,1.26,0l7.9-8.09a.9.9,0,0,0,0-1.277Z" transform="translate(0 -4.674)"/>
					</svg>
				</div>
			</a>
			<script>
				document.getElementById("allCollectionsButton").href = "CollectionSearchPage.html?searchInput=" + searchInput;
			</script>
			<div id="collection" class="zstackCentreChild" style="width: 100%;">
				<div id ="collectionRow" class="hstack productRow">
					<spacer style="width: 6.75%"></spacer>
					<a id="firstItemOutput" href="#" style="width: 25%;">
						<div class="vstack" style="align-items:baseline;">
							<img id="firstItemImage" src="Resources/Category Page/Item.png" alt="itemImage" width="100%">
							<p1 id="firstItemName" >Placeholder</p1>
							<p2 id="firstItemPrice" >⟁10</p2>
						</div>
					</a>
					<spacer style="width: 6.75%"></spacer>
					<a id="secondItemOutput" href="#" style="width: 25%;">
						<div class="vstack" style="align-items:baseline;">
							<img id="secondItemImage" src="Resources/Category Page/Item.png" alt="itemImage" width="100%">
							<p1 id="secondItemName" >Placeholder</p1>
							<p2 id="secondItemPrice" >⟁10</p2>
						</div>
					</a>
					<spacer style="width: 6.75%"></spacer>
					<a id="thirdItemOutput" href="#" style="width: 25%;">
						<div class="vstack" style="align-items:baseline;">
							<img id="thirdItemImage" src="Resources/Category Page/Item.png" alt="itemImage" width="100%">
							<p1 id="thirdItemName" >Placeholder</p1>
							<p2 id="thirdItemPrice" >⟁10</p2>
						</div>
					</a>
					<spacer style="width: 6.75%"></spacer>
					<a id="fourthItemOutput" href="#" style="width: 25%;">
						<div class="vstack" style="align-items:baseline;">
							<img id="fourthItemImage" src="Resources/Category Page/Item.png" alt="itemImage" width="100%">
							<p1 id="fourthItemName" >Placeholder</p1>
							<p2 id="fourthItemPrice" >⟁10</p2>
						</div>
					</a>
					<spacer style="width: 6.75%"></spacer>
				</div>
				<script>
				const topCollectionProducts = (searchProductsOfCollection(products, NameOfCollection))
				document.getElementById("firstItemOutput").href = ((products[(topCollectionProducts)[0]])["detailsLink"]);
				document.getElementById("firstItemImage").src = ((products[(topCollectionProducts)[0]])["thumbnail"]);
				document.getElementById("firstItemPrice").innerHTML = "⟁" + ((products[(topCollectionProducts)[0]])["price"]);
				document.getElementById("firstItemName").innerHTML = topCollectionProducts[0];
				
				document.getElementById("secondItemOutput").href = ((products[(topCollectionProducts)[1]])["detailsLink"]);
				document.getElementById("secondItemImage").src = ((products[(topCollectionProducts)[1]])["thumbnail"]);
				document.getElementById("secondItemPrice").innerHTML = "⟁" + ((products[(topCollectionProducts)[1]])["price"]);
				document.getElementById("secondItemName").innerHTML = topCollectionProducts[1];
				
				document.getElementById("thirdItemOutput").href = ((products[(topCollectionProducts)[2]])["detailsLink"]);
				document.getElementById("thirdItemImage").src = ((products[(topCollectionProducts)[2]])["thumbnail"]);
				document.getElementById("thirdItemPrice").innerHTML = "⟁" + ((products[(topCollectionProducts)[2]])["price"]);
				document.getElementById("thirdItemName").innerHTML = topCollectionProducts[2];
				
				document.getElementById("fourthItemOutput").href = ((products[(topCollectionProducts)[3]])["detailsLink"]);
				document.getElementById("fourthItemImage").src = ((products[(topCollectionProducts)[3]])["thumbnail"]);
				document.getElementById("fourthItemPrice").innerHTML = "⟁" + ((products[(topCollectionProducts)[3]])["price"]);
				document.getElementById("fourthItemName").innerHTML = topCollectionProducts[3];
				</script>
			</div>
			<script>
			</script>
		</div>
		<div id="products" style="padding-bottom: 3%">
			<div id ="productRow" class="hstack productRow" style="padding-top: 3%;">
				<a id="productOutput" class="placeholderProduct" href="#" style="width: 25%;">
					<div class="vstack" style="align-items:baseline;">
						<img id="productImage" src="Resources/Category Page/Item.png" alt="itemImage" width="100%">
						<p1 id="productName" >Placeholder</p1>
						<p2 id="productPrice" >⟁10</p2>
					</div>
				</a>
				<spacer id="productSpacer" class="placeholderProduct" style="width: 6.75%"></spacer>
			</div>
		</div>
		<script>
			let productRowsNumber = Math.floor(mainResults.length / 4);
			for (let i = 0; i < productRowsNumber; i++) {
				const newProductRow = document.getElementById("productRow").cloneNode(true);
				let idName = "productRow" + String((i + 1));
				newProductRow.id = idName;
				document.getElementById("products").appendChild(newProductRow)
			}
			var currentRowNumber = 0;
			mainResults.forEach(outputProduct);
			function outputProduct(value, index) {
				let count = index;
				if (count != 0) {
					if (count % 4 == 0) {
						currentRowNumber += 1;
					}
				}
				if (currentRowNumber == 0) {
					var rowNumberId = "productRow";
				} else {
					var rowNumberId = "productRow" + String(currentRowNumber);
				}
				document.getElementById("productName").textContent = value[0];
				document.getElementById("productPrice").textContent = "⟁" + products[value[0]]["price"];
				document.getElementById("productImage").src = products[value[0]]["thumbnail"];
				document.getElementById("productOutput").href = products[value[0]]["detailsLink"];
				let productSpacer = document.getElementById("productSpacer").cloneNode(true);
				productSpacer.classList.remove("placeholderProduct");
				let newListedProduct = document.getElementById("productOutput").cloneNode(true);
				newListedProduct.classList.remove("placeholderProduct");
				let currentRow = document.getElementById(rowNumberId);
				currentRow.appendChild(productSpacer);
				currentRow.appendChild(newListedProduct);
				if ((count + 1) % 4 == 0) {
					let lastProductSpacer = document.getElementById("productSpacer").cloneNode(true);
					lastProductSpacer.classList.remove("placeholderProduct");
					currentRow.appendChild(lastProductSpacer);
				}
				if (productRowsNumber == (Math.floor(count / 4))) {
					for (let i = 0; i < (((productRowsNumber + 1) * 4) - (count + 1)); i++) {
						let extraProductSpacer = document.getElementById("productSpacer").cloneNode(true);
						extraProductSpacer.classList.remove("placeholderProduct");
						extraProductSpacer.style.width = "31.75%";
						currentRow.appendChild(extraProductSpacer);
					}
					let extraLastProductSpacer = document.getElementById("productSpacer").cloneNode(true);
					extraLastProductSpacer.classList.remove("placeholderProduct");
					extraLastProductSpacer.style.width = "6.75%";
					currentRow.appendChild(extraLastProductSpacer);
				}
			}
			
			let placeholders = document.getElementsByClassName("placeholderProduct");
			while(placeholders.length > 0){
        		placeholders[0].parentNode.removeChild(placeholders[0]);
    		}
			
		</script>
		<div id="footer">
			<img src="Resources/Footer/Footer Fade 1.png" alt="Footer Fade" width="100%" height="8">
			<img src="Resources/Footer/Footer Fade 2.png" alt="Footer Fade" width="100%" height="8">
			<div class="zstackParent">
				<img src="Resources/Footer/Footer Base.png" alt="Footer Base" width="100%" height="72">
	   			<div id="footerItems" class="zstackLeftChild hstack">
					<spacer style="width:3%"></spacer>
					<img src="Resources/Footer/Footer Logo and Icon.png" alt="Pixelloid Logo" style="width:20%;">
		    		<spacer style="width:50%"></spacer>
		    		<a href="AboutPage.html"><h5>About</h5></a>
		    		<spacer style="width:3%"></spacer>
		    		<a href="ContactPage.html"><h5>Contact</h5></a>
		    		<spacer style="width:3%"></spacer>
		    		<a href="SitemapPage.html"><h5>Sitemap</h5></a>
		    		<spacer style="width:3%"></spacer>
		   	 		<a href="T&CsPage.html"><h5>T&amp;Cs</h5></a>
					<spacer style="width:3%"></spacer>
	    		</div>
			</div>
		</div>
	</div>
</body>
</html>
